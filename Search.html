document.getElementById('searchForm').addEventListener('submit', function(e) {
    e.preventDefault();
    let query = document.getElementById('searchQuery').value;
    fetchResults(query);
});

async function fetchResults(query) {
    const apiKey = 'b992de47646fec74289d5b7057534867ce2a006f6723673c187aedc9bd470031';
    const url = `https://serpapi.com/search.json?q=${encodeURIComponent(query)}&hl=en&api_key=${apiKey}`;

    try {
        const response = await fetch(url);
        const data = await response.json();

        // Debugging: Log the entire response to see what you're getting
        console.log('API Response:', data);

        displayResults(data);
    } catch (error) {
        console.error('Error:', error);
    }
}

function displayResults(data) {
    const resultsDiv = document.getElementById('results');
    resultsDiv.innerHTML = '';

    // Check if the response contains organic results
    if (data.organic_results && data.organic_results.length > 0) {
        data.organic_results.forEach(result => {
            const resultItem = document.createElement('div');
            resultItem.classList.add('result-item');
            
            const title = document.createElement('h3');
            title.innerHTML = `<a href="${result.link}" target="_blank">${result.title}</a>`;
            
            const snippet = document.createElement('p');
            snippet.textContent = result.snippet || '';

            resultItem.appendChild(title);
            resultItem.appendChild(snippet);
            resultsDiv.appendChild(resultItem);
        });
    } else {
        resultsDiv.innerHTML = '<p>No results found.</p>';
    }
}
